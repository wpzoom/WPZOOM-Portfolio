!function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=15)}([function(e,t){!function(){e.exports=this.wp.element}()},function(e,t){!function(){e.exports=this.wp.i18n}()},function(e,t){!function(){e.exports=this.wp.components}()},function(e,t){!function(){e.exports=this.wp.blocks}()},function(e,t){function o(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=o=function(e){return typeof e}:e.exports=o=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(t)}e.exports=o},function(e,t){!function(){e.exports=this.wp.date}()},function(e,t){function o(){return e.exports=o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},o.apply(this,arguments)}e.exports=o},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function o(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}},function(e,t,o){var n=o(4),r=o(16);e.exports=function(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?r(e):t}},function(e,t){function o(t){return e.exports=o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},o(t)}e.exports=o},function(e,t,o){var n=o(17);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}},function(e,t){!function(){e.exports=this.wp.apiFetch}()},function(e,t){!function(){e.exports=this.wp.blockEditor}()},function(e,t){!function(){e.exports=this.wp.data}()},function(e,t,o){"use strict";o.r(t);var n=o(4),r=o.n(n),c=o(6),i=o.n(c),a=o(7),l=o.n(a),s=o(8),u=o.n(s),p=o(9),b=o.n(p),m=o(10),f=o.n(m),d=o(11),h=o.n(d),_=o(0),O=o(12),j=o.n(O),g=o(13),y=o(3),w=o(2),k=o(14),v=o(5),E=o(1);Object(y.registerBlockType)("wpzoom-blocks/posts",{title:Object(E.__)("Posts","wpzoom-blocks"),description:Object(E.__)("Display a customizable list of posts.","wpzoom-blocks"),icon:"list-view",category:"wpzoom-blocks",supports:{html:!1},example:{},edit:Object(k.withSelect)((function(e,t){var o=e("core").getEntityRecords,n=t.attributes,r=n.categories,c=n.amount,i=n.order,a=n.orderBy;n.thumbnailSize;return{posts:o("postType","post",{categories:r,orderby:a,order:i,per_page:c,status:"publish"}),categoriesList:o("taxonomy","category",{per_page:-1,hide_empty:!1})}}))(function(e){function t(){var e;return l()(this,t),(e=b()(this,f()(t).apply(this,arguments))).state={imageSizes:[]},e}return h()(t,e),u()(t,[{key:"componentDidMount",value:function(){var e=this;this.isStillMounted=!0,this.fetchRequest=j()({path:"/wpzoom-blocks/v1/image-sizes"}),this.fetchRequest.then((function(t){e.isStillMounted&&e.setState({imageSizes:t})})),this.fetchRequest.catch((function(){e.isStillMounted&&e.setState({imageSizes:[]})}))}},{key:"componentWillUnmount",value:function(){this.isStillMounted=!1}},{key:"render",value:function(){var e=this.props,t=e.attributes,o=e.setAttributes,n=e.posts,c=e.categoriesList,a=e.name,l=(e.className,t.categories),s=t.amount,u=t.order,p=t.orderBy,b=t.showThumbnail,m=t.thumbnailSize,f=t.showDate,d=t.showExcerpt,h=t.excerptLength,O=t.showReadMoreButton,j=this.state.imageSizes,y=a.replace(/[\/]/i,"_")+"-block",k=Object(v.__experimentalGetSettings)().formats.date;return n&&c&&j?n&&0===n.length?Object(_.createElement)(_.Fragment,null,Object(_.createElement)(w.Placeholder,{icon:"list-view",label:Object(E.__)("WPZOOM Blocks - Posts","wpzoom-blocks")},Object(E.__)("No posts found.","wpzoom-blocks"))):Object(_.createElement)(_.Fragment,null,Object(_.createElement)(g.InspectorControls,null,Object(_.createElement)(w.PanelBody,{title:Object(E.__)("Options","wpzoom-blocks")},Object(_.createElement)(w.QueryControls,i()({order:u,orderBy:p},{numberOfItems:s,categoriesList:c,selectedCategoryId:l,onOrderChange:function(e){return o({order:e})},onOrderByChange:function(e){return o({orderBy:e})},onCategoryChange:function(e){return o({categories:""!==e?e:void 0})},onNumberOfItemsChange:function(e){return o({amount:e})}})),Object(_.createElement)(w.ToggleControl,{label:Object(E.__)("Show Post Thumbnail","wpzoom-blocks"),checked:b,onChange:function(e){return o({showThumbnail:e})}}),b&&Object(_.createElement)(w.SelectControl,{label:Object(E.__)("Post Thumbnail Size","wpzoom-blocks"),value:m,options:j,onChange:function(e){return o({thumbnailSize:e})}}),Object(_.createElement)(w.ToggleControl,{label:Object(E.__)("Show Post Date","wpzoom-blocks"),checked:f,onChange:function(e){return o({showDate:e})}}),Object(_.createElement)(w.ToggleControl,{label:Object(E.__)("Show Post Excerpt","wpzoom-blocks"),checked:d,onChange:function(e){return o({showExcerpt:e})}}),d&&Object(_.createElement)(w.RangeControl,{label:Object(E.__)("Excerpt Length","wpzoom-blocks"),value:h,onChange:function(e){return o({excerptLength:e})},min:1,max:1e3}),Object(_.createElement)(w.ToggleControl,{label:Object(E.__)("Show Read More Button","wpzoom-blocks"),checked:O,onChange:function(e){return o({showReadMoreButton:e})}}))),Object(_.createElement)("div",{className:"wpzoom-blocks ".concat(y)},Object(_.createElement)("ul",{className:"".concat(y,"_posts-list")},n.map((function(e,t){var o="title"in e&&"object"===r()(e.title)&&"rendered"in e.title?e.title.rendered.trim():Object(E.__)("(no title)","wpzoom-blocks"),n=!1;if(b&&e.featured_media_urls&&"object"===r()(e.featured_media_urls))if(m in e.featured_media_urls)n=e.featured_media_urls[m];else if("thumbnail"in e.featured_media_urls)n=e.featured_media_urls.thumbnail;else{var c=e.featured_media_urls[Object.keys(e.featured_media_urls)[0]];c&&(n=c)}return Object(_.createElement)("li",{key:e.id,className:"".concat(y,"_post ").concat(y,"_post-").concat(e.id)},Object(_.createElement)("div",{className:"".concat(y,"_post-wrap")},b&&n&&Array.isArray(n)&&n.length>0&&Object(_.createElement)("div",{className:"".concat(y,"_post-thumbnail")},Object(_.createElement)("a",{href:e.link,title:o},Object(_.createElement)("img",{src:n[0],width:n[1],height:n[2],alt:o}))),Object(_.createElement)("div",{className:"".concat(y,"_post-details")},Object(_.createElement)("h3",{className:"".concat(y,"_post-title")},Object(_.createElement)("a",{href:e.link,title:o},o?Object(_.createElement)(_.RawHTML,null,o):Object(E.__)("(no title)","wpzoom-blocks"))),f&&e.date_gmt&&Object(_.createElement)("time",{dateTime:Object(v.format)("c",e.date_gmt),className:"".concat(y,"_post-date")},Object(v.dateI18n)(k,e.date_gmt)),d&&"content"in e&&"object"===r()(e.content)&&"rendered"in e.content&&Object(_.createElement)("div",{className:"".concat(y,"_post-content")},Object(_.createElement)(_.RawHTML,{key:"html"},e.content.rendered.trim().split(" ",h).join(" "))),O&&Object(_.createElement)("div",{className:"".concat(y,"_post-readmore-button wp-block-button")},Object(_.createElement)("a",{href:e.link,title:Object(E.__)("Continue reading this post...","wpzoom-blocks"),className:"wp-block-button__link"},Object(E.__)("Read More","wpzoom-blocks"))))))}))))):Object(_.createElement)(_.Fragment,null,Object(_.createElement)(w.Placeholder,{icon:"list-view",label:Object(E.__)("WPZOOM Blocks - Posts","wpzoom-blocks")},Object(_.createElement)(w.Spinner,null)," ",Object(E.__)("Loading posts...","wpzoom-blocks")))}}]),t}(_.Component))})},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t){function o(t,n){return e.exports=o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(t,n)}e.exports=o}]);